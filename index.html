

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Zipline &mdash; Zipline 1.4.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Install" href="install.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#" class="icon icon-home" alt="Documentation Home"> Zipline
          

          
          </a>

          
            
            
              <div class="version">
                1.4.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="beginner-tutorial.html">Zipline Beginner Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="bundles.html">Data Bundles</a></li>
<li class="toctree-l1"><a class="reference internal" href="trading-calendars.html">Trading Calendars</a></li>
<li class="toctree-l1"><a class="reference internal" href="risk-and-perf-metrics.html">Risk and Performance Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="development-guidelines.html">Development Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-process.html">Release Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="releases.html">Release Notes</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">Zipline</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#" class="icon icon-home"></a> &raquo;</li>
        
      <li>Zipline</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <a class="reference external image-reference" href="https://www.zipline.io"><img alt="Zipline" class="align-center" src="https://media.quantopian.com/logos/open_source/zipline-logo-03_.png" style="width: 212px;" /></a>
<hr class="docutils" />
<p><a class="reference external" href="https://gitter.im/quantopian/zipline?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img alt="Gitter" src="https://badges.gitter.im/Join%20Chat.svg" /></a>
<a class="reference external" href="https://pypi.python.org/pypi/zipline"><img alt="pypi version status" src="https://img.shields.io/pypi/v/zipline.svg" /></a>
<a class="reference external" href="https://pypi.python.org/pypi/zipline"><img alt="pypi pyversion status" src="https://img.shields.io/pypi/pyversions/zipline.svg" /></a>
<a class="reference external" href="https://travis-ci.org/quantopian/zipline"><img alt="travis status" src="https://travis-ci.org/quantopian/zipline.svg?branch=master" /></a>
<a class="reference external" href="https://ci.appveyor.com/project/quantopian/zipline/branch/master"><img alt="appveyor status" src="https://ci.appveyor.com/api/projects/status/3dg18e6227dvstw6/branch/master?svg=true" /></a>
<a class="reference external" href="https://coveralls.io/r/quantopian/zipline"><img alt="Coverage Status" src="https://coveralls.io/repos/quantopian/zipline/badge.svg" /></a></p>
<p>Zipline is a Pythonic algorithmic trading library. It is an event-driven
system for backtesting. Zipline is currently used in production as the backtesting and live-trading
engine powering <a class="reference external" href="https://www.quantopian.com">Quantopian</a> – a free,
community-centered, hosted platform for building and executing trading
strategies. Quantopian also offers a <a class="reference external" href="https://factset.quantopian.com">fully managed service for professionals</a>
that includes Zipline, Alphalens, Pyfolio, FactSet data, and more.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://groups.google.com/forum/#!forum/zipline">Join our Community!</a></p></li>
<li><p><a class="reference external" href="https://www.zipline.io">Documentation</a></p></li>
<li><p>Want to Contribute? See our <a class="reference external" href="https://www.zipline.io/development-guidelines">Development Guidelines</a></p></li>
</ul>
<div class="section" id="features">
<h1>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><strong>Ease of Use:</strong> Zipline tries to get out of your way so that you can
focus on algorithm development. See below for a code example.</p></li>
<li><p><strong>“Batteries Included”:</strong> many common statistics like
moving average and linear regression can be readily accessed from
within a user-written algorithm.</p></li>
<li><p><strong>PyData Integration:</strong> Input of historical data and output of performance statistics are
based on Pandas DataFrames to integrate nicely into the existing
PyData ecosystem.</p></li>
<li><p><strong>Statistics and Machine Learning Libraries:</strong> You can use libraries like matplotlib, scipy,
statsmodels, and sklearn to support development, analysis, and
visualization of state-of-the-art trading systems.</p></li>
</ul>
</div>
<div class="section" id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p>Zipline currently supports Python 2.7, 3.5, and 3.6, and may be installed via
either pip or conda.</p>
<p><strong>Note:</strong> Installing Zipline is slightly more involved than the average Python
package. See the full <a class="reference external" href="https://www.zipline.io/install">Zipline Install Documentation</a> for detailed
instructions.</p>
<p>For a development installation (used to develop Zipline itself), create and
activate a virtualenv, then run the <code class="docutils literal notranslate"><span class="pre">etc/dev-install</span></code> script.</p>
</div>
<div class="section" id="quickstart">
<h1>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">¶</a></h1>
<p>See our <a class="reference external" href="https://www.zipline.io/beginner-tutorial">getting started tutorial</a>.</p>
<p>The following code implements a simple dual moving average algorithm.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">zipline.api</span> <span class="kn">import</span> <span class="n">order_target</span><span class="p">,</span> <span class="n">record</span><span class="p">,</span> <span class="n">symbol</span>

<span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">context</span><span class="p">):</span>
    <span class="n">context</span><span class="o">.</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">context</span><span class="o">.</span><span class="n">asset</span> <span class="o">=</span> <span class="n">symbol</span><span class="p">(</span><span class="s1">&#39;AAPL&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">handle_data</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="c1"># Skip first 300 days to get full windows</span>
    <span class="n">context</span><span class="o">.</span><span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">300</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="c1"># Compute averages</span>
    <span class="c1"># data.history() has to be called with the same params</span>
    <span class="c1"># from above and returns a pandas dataframe.</span>
    <span class="n">short_mavg</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">asset</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span><span class="p">,</span> <span class="n">bar_count</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">frequency</span><span class="o">=</span><span class="s2">&quot;1d&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">long_mavg</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">asset</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span><span class="p">,</span> <span class="n">bar_count</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">frequency</span><span class="o">=</span><span class="s2">&quot;1d&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

    <span class="c1"># Trading logic</span>
    <span class="k">if</span> <span class="n">short_mavg</span> <span class="o">&gt;</span> <span class="n">long_mavg</span><span class="p">:</span>
        <span class="c1"># order_target orders as many shares as needed to</span>
        <span class="c1"># achieve the desired number of shares.</span>
        <span class="n">order_target</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">asset</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">short_mavg</span> <span class="o">&lt;</span> <span class="n">long_mavg</span><span class="p">:</span>
        <span class="n">order_target</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">asset</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="c1"># Save values for later inspection</span>
    <span class="n">record</span><span class="p">(</span><span class="n">AAPL</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">current</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">asset</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span><span class="p">),</span>
           <span class="n">short_mavg</span><span class="o">=</span><span class="n">short_mavg</span><span class="p">,</span>
           <span class="n">long_mavg</span><span class="o">=</span><span class="n">long_mavg</span><span class="p">)</span>
</pre></div>
</div>
<p>You can then run this algorithm using the Zipline CLI.
First, you must download some sample pricing and asset data:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ zipline ingest
$ zipline run -f dual_moving_average.py --start <span class="m">2014</span>-1-1 --end <span class="m">2018</span>-1-1 -o dma.pickle --no-benchmark
</pre></div>
</div>
<p>This will download asset pricing data data sourced from Quandl, and stream it through the algorithm over the specified time range.
Then, the resulting performance DataFrame is saved in <code class="docutils literal notranslate"><span class="pre">dma.pickle</span></code>, which you can load and analyze from within Python.</p>
<p>You can find other examples in the <code class="docutils literal notranslate"><span class="pre">zipline/examples</span></code> directory.</p>
</div>
<div class="section" id="questions">
<h1>Questions?<a class="headerlink" href="#questions" title="Permalink to this headline">¶</a></h1>
<p>If you find a bug, feel free to <a class="reference external" href="https://github.com/quantopian/zipline/issues/new">open an issue</a> and fill out the issue template.</p>
</div>
<div class="section" id="contributing">
<h1>Contributing<a class="headerlink" href="#contributing" title="Permalink to this headline">¶</a></h1>
<p>All contributions, bug reports, bug fixes, documentation improvements, enhancements, and ideas are welcome. Details on how to set up a development environment can be found in our <a class="reference external" href="https://www.zipline.io/development-guidelines">development guidelines</a>.</p>
<p>If you are looking to start working with the Zipline codebase, navigate to the GitHub <cite>issues</cite> tab and start looking through interesting issues. Sometimes there are issues labeled as <a class="reference external" href="https://github.com/quantopian/zipline/issues?q=is%3Aissue+is%3Aopen+label%3A%22Beginner+Friendly%22">Beginner Friendly</a> or <a class="reference external" href="https://github.com/quantopian/zipline/issues?q=is%3Aissue+is%3Aopen+label%3A%22Help+Wanted%22">Help Wanted</a>.</p>
<p>Feel free to ask questions on the <a class="reference external" href="https://groups.google.com/forum/#!forum/zipline">mailing list</a> or on <a class="reference external" href="https://gitter.im/quantopian/zipline">Gitter</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please note that Zipline is not a community-led project. Zipline is
maintained by the Quantopian engineering team, and we are quite small and
often busy.</p>
<p>Because of this, we want to warn you that we may not attend to your pull
request, issue, or direct mention in months, or even years. We hope you
understand, and we hope that this note might help reduce any frustration or
wasted time.</p>
</div>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="beginner-tutorial.html">Zipline Beginner Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="bundles.html">Data Bundles</a></li>
<li class="toctree-l1"><a class="reference internal" href="trading-calendars.html">Trading Calendars</a></li>
<li class="toctree-l1"><a class="reference internal" href="risk-and-perf-metrics.html">Risk and Performance Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="development-guidelines.html">Development Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-process.html">Release Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="releases.html">Release Notes</a></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="install.html" class="btn btn-neutral float-right" title="Install" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Quantopian Inc.

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>